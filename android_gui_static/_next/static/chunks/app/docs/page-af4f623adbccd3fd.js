(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9040],{107:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(4568),i=a(7620),r=a(6264);function n(){let[e,t]=(0,i.useState)("overview"),a={overview:{title:"API Overview",description:"CIRIS provides a comprehensive REST API with 150+ endpoints across 12 modules for agent interaction, system management, and observability.",baseUrl:"http://localhost:8080",endpoints:[{method:"INFO",path:"/v1/*",description:"All API endpoints require authentication except /emergency/* endpoints",auth:"Bearer token from /v1/auth/login",response:{authentication:"JWT Bearer token",roles:["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"],"rate-limiting":"100 requests per minute",versioning:"v1 (stable)"}}]},agent:{title:"Agent Interaction",description:"Core endpoints for interacting with the CIRIS agent",baseUrl:"/v1/agent",endpoints:[{method:"POST",path:"/interact",description:"Send a message to the agent and receive a response",auth:"Required (OBSERVER+)",params:{message:"string - The message to send",channel_id:'string - Channel identifier (e.g., "api_user", "discord_123")',context:"object - Optional additional context"},response:{message_id:"string - Unique message identifier",state:"string - Current cognitive state",timestamp:"string - ISO timestamp"}},{method:"GET",path:"/status",description:"Get current agent status and cognitive state",auth:"Required (OBSERVER+)",response:{state:"WAKEUP | WORK | PLAY | SOLITUDE | DREAM | SHUTDOWN",health:"healthy | degraded | unhealthy",uptime_seconds:"number",active_tasks:"number"}},{method:"GET",path:"/identity",description:"Get agent identity and capabilities",auth:"Required (OBSERVER+)",response:{name:"string",version:"string",capabilities:["array of capabilities"],personality_traits:"object"}},{method:"GET",path:"/history",description:"Get conversation history",auth:"Required (OBSERVER+)",params:{channel_id:"string - Filter by channel",limit:"number - Max results (default: 20)",offset:"number - Pagination offset"}},{method:"GET",path:"/channels",description:"List all active communication channels",auth:"Required (OBSERVER+)"}]},system:{title:"System Management",description:"System control, health monitoring, and adapter management",baseUrl:"/v1/system",endpoints:[{method:"GET",path:"/health",description:"Overall system health status",auth:"Optional (degraded info without auth)",response:{status:"healthy | degraded | unhealthy",version:"string",uptime:"number",services:"object - Service health summary"}},{method:"GET",path:"/services",description:"Status of all CIRIS services",auth:"Required (OBSERVER+)",response:{services:[{name:"string",type:"graph | core | infrastructure | governance | special",healthy:"boolean",available:"boolean",uptime_seconds:"number",metrics:"object"}]}},{method:"GET",path:"/adapters",description:"List all registered adapters",auth:"Required (ADMIN+)"},{method:"POST",path:"/adapters/{type}",description:"Register a new adapter (discord, cli, api)",auth:"Required (ADMIN+)",params:{config:{enabled:"boolean",priority:"number"}}},{method:"DELETE",path:"/adapters/{id}",description:"Unregister an adapter",auth:"Required (ADMIN+)"},{method:"POST",path:"/runtime/{action}",description:"Runtime control (pause, resume, state)",auth:"Required (ADMIN+)",params:{action:"pause | resume | state",duration:"number - For pause action (seconds)"}},{method:"GET",path:"/runtime/queue",description:"Get processing queue status",auth:"Required (ADMIN+)"},{method:"POST",path:"/runtime/single-step",description:"Execute single processing step (debug)",auth:"Required (ADMIN+)"},{method:"GET",path:"/processors",description:"Get info about 6 cognitive processor states",auth:"Required (OBSERVER+)"}]},memory:{title:"Memory Operations",description:"Graph-based memory storage and retrieval",baseUrl:"/v1/memory",endpoints:[{method:"POST",path:"/store",description:"Create a new memory node",auth:"Required (OBSERVER+)",params:{type:"OBSERVATION | CONCEPT | RELATIONSHIP | EMOTION | PLAN",scope:"LOCAL | GLOBAL",attributes:"object - Node-specific attributes"}},{method:"POST",path:"/query",description:"Query memory graph with filters",auth:"Required (OBSERVER+)",params:{query:"string - Search query",type:"string - Filter by node type",scope:"string - Filter by scope",limit:"number"}},{method:"GET",path:"/search",description:"Full-text search across memories",auth:"Required (OBSERVER+)",params:{q:"string - Search query",limit:"number"}},{method:"GET",path:"/visualize/graph",description:"Generate interactive graph visualization",auth:"Required (OBSERVER+)",params:{layout:"timeline | force | hierarchical",hours:"number - Time window",limit:"number - Max nodes"},response:"SVG visualization"}]},users:{title:"User Management",description:"User accounts, roles, and Wise Authority management",baseUrl:"/v1/users",endpoints:[{method:"GET",path:"/",description:"List all users with filtering",auth:"Required (ADMIN+)",params:{page:"number",page_size:"number",search:"string",api_role:"OBSERVER | ADMIN | AUTHORITY | SYSTEM_ADMIN",wa_role:"ORACLE | STEWARD | HARBINGER | ROOT"}},{method:"POST",path:"/",description:"Create new user",auth:"Required (SYSTEM_ADMIN)",params:{username:"string",password:"string",api_role:"string"}},{method:"GET",path:"/{userId}",description:"Get user details",auth:"Required (self or ADMIN+)"},{method:"PUT",path:"/{userId}",description:"Update user role/status",auth:"Required (ADMIN+)",params:{api_role:"string",is_active:"boolean"}},{method:"POST",path:"/{userId}/mint-wa",description:"Mint user as Wise Authority",auth:"Required (ROOT WA)",params:{wa_role:"ORACLE | STEWARD | HARBINGER",signature:"string - Ed25519 signature"}}]},telemetry:{title:"Telemetry & Observability",description:"Metrics, logs, traces, and resource monitoring",baseUrl:"/v1/telemetry",endpoints:[{method:"GET",path:"/overview",description:"System metrics summary",auth:"Required (OBSERVER+)"},{method:"GET",path:"/metrics",description:"All available metrics",auth:"Required (OBSERVER+)"},{method:"GET",path:"/logs",description:"System log entries",auth:"Required (ADMIN+)",params:{level:"DEBUG | INFO | WARNING | ERROR",service:"string - Filter by service",page_size:"number"}},{method:"GET",path:"/traces",description:"Distributed request traces",auth:"Required (ADMIN+)"},{method:"GET",path:"/resources/history",description:"Historical resource usage",auth:"Required (OBSERVER+)",params:{start_time:"ISO timestamp",end_time:"ISO timestamp"}}]},config:{title:"Configuration Management",description:"Dynamic configuration management",baseUrl:"/v1/config",endpoints:[{method:"GET",path:"/",description:"Get all configuration values",auth:"Required (ADMIN+)"},{method:"GET",path:"/{key}",description:"Get specific config value",auth:"Required (OBSERVER+)"},{method:"PUT",path:"/{key}",description:"Set configuration value",auth:"Required (ADMIN+)",params:{value:"any",description:"string"}}]},audit:{title:"Audit Trail",description:"Comprehensive audit logging for compliance",baseUrl:"/v1/audit",endpoints:[{method:"GET",path:"/entries",description:"List audit entries",auth:"Required (ADMIN+)",params:{page:"number",page_size:"number",service:"string",action:"string"}},{method:"POST",path:"/search",description:"Search audit entries",auth:"Required (ADMIN+)",params:{service:"string",action:"string",date_from:"ISO timestamp",date_to:"ISO timestamp"}}]},wa:{title:"Wise Authority",description:"Moral guidance and decision deferral system",baseUrl:"/v1/wa",endpoints:[{method:"GET",path:"/status",description:"Wise Authority system status",auth:"Required (OBSERVER+)"},{method:"GET",path:"/permissions",description:"List granted permissions",auth:"Required (AUTHORITY+)"},{method:"GET",path:"/deferrals",description:"List pending deferrals",auth:"Required (AUTHORITY+)"},{method:"POST",path:"/guidance",description:"Request moral guidance",auth:"Required (OBSERVER+)",params:{topic:"string",context:"object",urgency:"low | medium | high | critical"}}]},auth:{title:"Authentication",description:"Authentication and authorization",baseUrl:"/v1/auth",endpoints:[{method:"POST",path:"/login",description:"Login with username/password",auth:"None",params:{username:"string",password:"string"},response:{access_token:"string - JWT token",token_type:"bearer",user:"object - User info"}},{method:"GET",path:"/me",description:"Get current user info",auth:"Required"},{method:"POST",path:"/refresh",description:"Refresh authentication token",auth:"Required"},{method:"POST",path:"/logout",description:"Logout and invalidate token",auth:"Required"}]},emergency:{title:"Emergency Operations",description:"Emergency endpoints that bypass normal authentication",baseUrl:"/emergency",endpoints:[{method:"GET",path:"/health",description:"Basic health check without auth",auth:"None",response:{status:"ok | error",timestamp:"ISO timestamp"}},{method:"POST",path:"/shutdown",description:"Emergency shutdown with Ed25519 signature",auth:"Ed25519 signature required",params:{reason:"string",signature:"string - Ed25519 signature",public_key:"string - Ed25519 public key"}}]},websocket:{title:"WebSocket",description:"Real-time bidirectional communication",baseUrl:"/v1/ws",endpoints:[{method:"WS",path:"/",description:"WebSocket connection for real-time updates",auth:"Token in query param or first message",params:{token:"string - Auth token (query param)",subscribe:"array - Event types to subscribe"},response:{events:["agent.message - Agent responses","system.status - System status changes","telemetry.metrics - Real-time metrics","memory.update - Memory graph updates"]}}]}},n=Object.keys(a),o=a[e]||a.overview;return(0,s.jsx)(r.O,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CIRIS API Documentation"}),(0,s.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Complete reference for all 150+ endpoints across 12 API modules"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)("div",{className:"bg-white shadow rounded-lg sticky top-4",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"API Modules"}),(0,s.jsx)("nav",{className:"space-y-1",children:n.map(i=>(0,s.jsx)("button",{onClick:()=>t(i),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(e===i?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:a[i].title},i))})]})})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:o.description}),"http://localhost:8080"!==o.baseUrl&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Base URL: "}),(0,s.jsx)("code",{className:"text-sm font-mono text-gray-900",children:o.baseUrl})]}),(0,s.jsx)("div",{className:"space-y-6",children:o.endpoints.map((e,t)=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ".concat("GET"===e.method?"bg-blue-100 text-blue-800":"POST"===e.method?"bg-green-100 text-green-800":"PUT"===e.method?"bg-yellow-100 text-yellow-800":"DELETE"===e.method?"bg-red-100 text-red-800":"WS"===e.method?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.method}),(0,s.jsx)("code",{className:"text-sm font-mono text-gray-900",children:e.path})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.auth})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.params&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-2",children:"Parameters"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded p-3",children:(0,s.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:"object"==typeof e.params?JSON.stringify(e.params,null,2):e.params})})]}),e.response&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-2",children:"Response"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded p-3",children:(0,s.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:"object"==typeof e.response?JSON.stringify(e.response,null,2):e.response})})]})]},t))})]})})})]})]})})}},1106:(e,t,a)=>{Promise.resolve().then(a.bind(a,107))},2942:(e,t,a)=>{"use strict";var s=a(2418);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},3120:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var s=a(704);function i(){let e=window.location.hostname,t=window.location.pathname,a=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!a)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=a?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let s="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:s}}}var r=a(5950);class n{configure(e,t){let a,{mode:s}=i();if("managed"===s)a="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));a=t||window.location.origin}t||(t=r.a.getAccessToken()||void 0);let n={baseURL:a,authToken:t,agentId:e,mode:s};return this.hasConfigChanged(n)&&this.applyConfiguration(n),n}configureForOAuthCallback(e,t){let a,{mode:s}=i(),r={baseURL:"managed"===s?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:s};return this.applyConfiguration(r),this.storeConfiguration(r),r}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),s.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),a=r.a.getAccessToken()||void 0;return{...t,authToken:a}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let o=new n},6264:(e,t,a)=>{"use strict";a.d(t,{O:()=>o});var s=a(4568),i=a(7620),r=a(2942),n=a(9484);function o(e){let{children:t,requiredRole:a,requiredPermission:o}=e,{user:c,loading:d,hasRole:u,hasPermission:l}=(0,n.A)(),h=(0,r.useRouter)();return((0,i.useEffect)(()=>{if(!d){if(!c)return void h.push("/login");if(a&&!u(a)||o&&!l(o))return void h.push("/unauthorized")}},[c,d,a,o,u,l,h]),d)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading..."})}):c&&(!a||u(a))&&(!o||l(o))?(0,s.jsx)(s.Fragment,{children:t}):null}},9484:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,O:()=>u});var s=a(4568),i=a(7620),r=a(2942),n=a(3237),o=a(704),c=a(3120);let d=(0,i.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,i.useState)(null),[l,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)(null),g=(0,r.useRouter)();(0,i.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?h(!1):y().then(e=>{e||f()});let t=localStorage.getItem("manager_token");t&&p(t);let a=e=>{console.log("[AuthContext] Native auth ready event received"),y()};return window.addEventListener("ciris_native_auth_ready",a),()=>{window.removeEventListener("ciris_native_auth_ready",a)}},[]);let y=async()=>{let e="true"===localStorage.getItem("isNativeApp"),t=localStorage.getItem("ciris_native_auth"),a=localStorage.getItem("ciris_auth_method"),s="true"===localStorage.getItem("ciris_show_setup");if(!e||!t)return!1;try{let e=JSON.parse(t);console.log("[AuthContext] Native auth detected - method:",a,"showSetup:",s),localStorage.setItem("selectedAgentId","datum"),c._.configure("datum");try{let e=await o.AQ.login("admin","ciris_admin_password"),t=o.AQ.auth.getAccessToken();return t&&c._.configure("datum",t),u(e),console.log("[AuthContext] Native auth login successful"),h(!1),s&&(console.log("[AuthContext] Redirecting to setup wizard"),localStorage.setItem("ciris_native_llm_mode","google"===a?"ciris_proxy":"custom"),g.push("/setup")),!0}catch(i){console.error("[AuthContext] Native auth login failed:",i);let t={user_id:e.googleUserId||"native_user",username:e.displayName||"Native User",role:"ADMIN",api_role:"ADMIN",permissions:["read","write","admin"],created_at:new Date().toISOString()};return u(t),h(!1),s&&(console.log("[AuthContext] Redirecting to setup wizard (mock user)"),localStorage.setItem("ciris_native_llm_mode","google"===a?"ciris_proxy":"custom"),g.push("/setup")),!0}}catch(e){return console.error("[AuthContext] Failed to parse native auth data:",e),!1}},f=async()=>{try{if(o.AQ.isAuthenticated()){let e=await o.AQ.auth.getMe();u(e)}}catch(e){console.error("Auth check failed:",e)}finally{h(!1)}},b=(0,i.useCallback)(async(e,t)=>{try{let a=localStorage.getItem("selectedAgentId");if(!a)throw Error("No agent selected");c._.configure(a);let s=await o.AQ.login(e,t),i=o.AQ.auth.getAccessToken();i&&c._.configure(a,i),u(s),n.Ay.success("Welcome, ".concat(s.username||s.user_id,"!")),g.push("/")}catch(e){throw n.Ay.error(e.message||"Login failed"),e}},[g]),R=(0,i.useCallback)(async()=>{try{await o.AQ.logout(),u(null),n.Ay.success("Logged out successfully"),g.push("/login")}catch(e){console.error("Logout failed:",e),n.Ay.error("Logout failed")}},[g]),v=(0,i.useCallback)(e=>!!a&&(a.permissions.includes(e)||"SYSTEM_ADMIN"===a.role),[a]),x=(0,i.useCallback)(e=>{if(!a)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(a.role)>=t.indexOf(e)},[a]),E=(0,i.useCallback)(e=>{o.AQ.setConfig({authToken:e})},[]),S=(0,i.useCallback)(()=>!!m,[m]);return(0,s.jsx)(d.Provider,{value:{user:a,loading:l,login:b,logout:R,hasPermission:v,hasRole:x,setUser:u,setToken:E,managerToken:m,setManagerToken:p,isManagerAuthenticated:S},children:t})}function l(){let e=(0,i.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,704,587,8315,7358],()=>t(1106)),_N_E=e.O()}]);
