ciris_engine/logic/dma/action_selection/faculty_integration.py:162:29: error:
Unsupported left operand type for + ("None")  [operator]
            updated_rationale = result.rationale + metadata_suffix
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/dma/action_selection/faculty_integration.py:162:29: note: Left operand is of type "str | None"
ciris_engine/protocols/services/graph/incident.py:45:5: error: Return type
"Coroutine[Any, Any, list[str]]" of "get_capabilities" incompatible with return
type "ServiceCapabilities" in supertype "ServiceProtocol"  [override]
        async def get_capabilities(self) -> List[str]:
        ^
ciris_engine/logic/adapters/api/middleware/rate_limiter.py:166:9: error: Name
"response" already defined on line 128  [no-redef]
            response: Response = await call_next(request)
            ^~~~~~~~
ciris_engine/logic/adapters/api/services/auth_service.py:157:19: error:
Unexpected keyword argument "password_hash" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                await self._auth_service.update_wa(
                      ^
ciris_engine/logic/adapters/api/services/auth_service.py:392:23: error:
Unexpected keyword argument "password_hash" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.update_wa(
                          ^
ciris_engine/logic/adapters/api/services/auth_service.py:564:27: error:
Unexpected keyword argument "role" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                        await self._auth_service.update_wa(user_id, role=u...
                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/api/services/auth_service.py:570:31: error:
Unexpected keyword argument "is_active" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                            await self._auth_service.update_wa(user_id, is...
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/api/services/auth_service.py:618:29: error:
Unexpected keyword argument "password_hash" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    asyncio.run(self._auth_service.update_wa(
                                ^
ciris_engine/logic/adapters/api/services/auth_service.py:639:23: error: Missing
positional argument "reason" in call to "revoke_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.revoke_wa(user_id)
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/services/auth_service.py:724:23: error:
Unexpected keyword argument "custom_permissions_json" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.update_wa(
                          ^
ciris_engine/logic/adapters/api/services/auth_service.py:854:23: error:
Unexpected keyword argument "role" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.update_wa(
                          ^
ciris_engine/logic/adapters/api/services/auth_service.py:854:23: error:
Unexpected keyword argument "parent_wa_id" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.update_wa(
                          ^
ciris_engine/logic/adapters/api/services/auth_service.py:854:23: error:
Unexpected keyword argument "auto_minted" for "update_wa" of
"AuthenticationServiceProtocol"  [call-arg]
                    await self._auth_service.update_wa(
                          ^
ciris_engine/logic/adapters/api/dependencies/auth.py:69:29: error: Argument 1
to "add" of "set" has incompatible type "str"; expected "Permission"  [arg-type]
                permissions.add(perm)
                                ^~~~
ciris_engine/logic/adapters/api/routes/telemetry_logs_reader.py:23:5: error:
Name "LogEntry" already defined (possibly by an import)  [no-redef]
        class LogEntry(BaseModel):
        ^
ciris_engine/logic/adapters/api/routes/audit.py:86:19: error: Incompatible
types in assignment (expression has type "AuditEntryContext", variable has type
"AuditContext")  [assignment]
            context = ctx
                      ^~~
ciris_engine/logic/adapters/api/routes/audit.py:358:29: error: Unexpected
keyword argument "start_time" for "export_audit_data" of "AuditServiceProtocol";
did you mean "start_date"?  [call-arg]
            export_data = await audit_service.export_audit_data(
                                ^
ciris_engine/logic/adapters/api/routes/audit.py:358:29: error: Unexpected
keyword argument "end_time" for "export_audit_data" of "AuditServiceProtocol" 
[call-arg]
            export_data = await audit_service.export_audit_data(
                                ^
ciris_engine/logic/services/infrastructure/authentication.py:1153:13: error:
Name "root_wa" already defined on line 1144  [no-redef]
                root_wa: Optional[WACertificate] = None
                ^~~~~~~
ciris_engine/logic/services/infrastructure/authentication.py:1220:25: error:
Returning Any from function declared to return "dict[Any, Any] | None" 
[no-any-return]
                            return decoded
                            ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_thread_manager.py:49:13: error:
Attribute "_time_service" already defined on line 47  [no-redef]
                self._time_service: "TimeServiceProtocol" = time_service
                ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_thread_manager.py:98:43: error:
Argument "auto_archive_duration" to "create_thread" of "PartialMessage" has
incompatible type "int"; expected "Literal[60, 1440, 4320, 10080]"  [arg-type]
                        auto_archive_duration=self.auto_archive_duration
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_thread_manager.py:104:43: error:
Argument "auto_archive_duration" to "create_thread" of "TextChannel" has
incompatible type "int"; expected "Literal[60, 1440, 4320, 10080]"  [arg-type]
                        auto_archive_duration=self.auto_archive_duration,
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_reaction_handler.py:59:13: error:
Attribute "_time_service" already defined on line 57  [no-redef]
                self._time_service: "TimeServiceProtocol" = time_service
                ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_guidance_handler.py:35:13: error:
Attribute "_time_service" already defined on line 33  [no-redef]
                self._time_service: "TimeServiceProtocol" = time_service
                ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_connection_manager.py:66:13: error:
Attribute "_time_service" already defined on line 64  [no-redef]
                self._time_service: "TimeServiceProtocol" = time_service
                ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_connection_manager.py:242:17: error:
Dict entry 2 has incompatible type "str": "float"; expected "str":
"int | str | None"  [dict-item]
                    "latency_ms": self.client.latency * 1000
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_audit.py:82:19: error: Unexpected
keyword argument "action" for "log_action" of "AuditServiceProtocol"  [call-arg]
                await self._audit_service.log_action(
                      ^
ciris_engine/logic/adapters/discord/discord_audit.py:82:19: error: Unexpected
keyword argument "actor" for "log_action" of "AuditServiceProtocol"  [call-arg]
                await self._audit_service.log_action(
                      ^
ciris_engine/logic/adapters/discord/discord_audit.py:85:25: error: Argument
"context" to "log_action" of "AuditServiceProtocol" has incompatible type
"AuditEntryContext"; expected "AuditActionContext"  [arg-type]
                    context=audit_context
                            ^~~~~~~~~~~~~
ciris_engine/logic/services/governance/filter.py:64:33: error: "object" has no
attribute "get_config"  [attr-defined]
                config_node = await self.config_service.get_config(self._c...
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/filter.py:459:19: error: "object" has no
attribute "set_config"  [attr-defined]
                await self.config_service.set_config(
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/filter.py:575:9: error: Returning Any
from function declared to return "ServiceType"  [no-any-return]
            return ServiceType.INFRASTRUCTURE_SERVICE
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/filter.py:575:16: error:
"type[ServiceType]" has no attribute "INFRASTRUCTURE_SERVICE"  [attr-defined]
            return ServiceType.INFRASTRUCTURE_SERVICE
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/runtime/modular_service_loader.py:148:13: error: Returning
Any from function declared to return "type[ServiceProtocol] | None" 
[no-any-return]
                return service_class
                ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_tools.py:36:15: error: Call to abstract
method "start" of "ServiceProtocol" with trivial body via super() is unsafe 
[safe-super]
            await super().start()
                  ^~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_tools.py:41:15: error: Call to abstract
method "stop" of "ServiceProtocol" with trivial body via super() is unsafe 
[safe-super]
            await super().stop()
                  ^~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:118: error: Unused
"type: ignore" comment  [unused-ignore]
                return False  # type: ignore[unreachable]
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:150:25: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                defer_until=self._time_service.now() + timedelta(hours=24)...
                            ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:242:55: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "timestamp" 
[union-attr]
    ...       deferral_id = f"defer_{deferral.task_id}_{self._time_service.ti...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/services/governance/wise_authority.py:528:36: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "timestamp" 
[union-attr]
                thought_id=f"guidance_{self._time_service.timestamp()}",
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:529:38: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "timestamp" 
[union-attr]
                task_id=f"guidance_task_{self._time_service.timestamp()}",
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:607:9: error:
Returning Any from function declared to return "ServiceType"  [no-any-return]
            return ServiceType.GOVERNANCE_SERVICE
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/wise_authority.py:607:16: error:
"type[ServiceType]" has no attribute "GOVERNANCE_SERVICE"  [attr-defined]
            return ServiceType.GOVERNANCE_SERVICE
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/secrets/service.py:525:9: error: Returning Any from function
declared to return "ServiceType"  [no-any-return]
            return ServiceType.CORE_SERVICE
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/secrets/service.py:525:16: error: "type[ServiceType]" has no
attribute "CORE_SERVICE"  [attr-defined]
            return ServiceType.CORE_SERVICE
                   ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/wa_cli_wizard.py:190:12: error:
Value of type "OAuthOperationResult" is not indexable  [index]
            if result["status"] == "success":
               ^~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/wa_cli_wizard.py:195:16: error:
Argument after ** must be a mapping, not "OAuthOperationResult"  [arg-type]
            return OAuthConfigResult(**result)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/buses/memory_bus.py:197:76: error: "type[GraphScope]" has no
attribute "PERSONAL"  [attr-defined]
    ...ope = GraphScope(scope) if scope != "default" else GraphScope.PERSONAL
                                                          ^~~~~~~~~~~~~~~~~~~
ciris_engine/logic/buses/memory_bus.py:199:31: error: "type[GraphScope]" has no
attribute "PERSONAL"  [attr-defined]
                    graph_scope = GraphScope.PERSONAL
                                  ^~~~~~~~~~~~~~~~~~~
ciris_engine/logic/buses/memory_bus.py:201:28: error: Unexpected keyword
argument "query_text" for "MemoryQuery"  [call-arg]
                memory_query = MemoryQuery(
                               ^
ciris_engine/logic/buses/memory_bus.py:201:28: error: Unexpected keyword
argument "limit" for "MemoryQuery"  [call-arg]
                memory_query = MemoryQuery(
                               ^
ciris_engine/logic/buses/communication_bus.py:163:21: error: Statement is
unreachable  [unreachable]
                        fetched_messages.append(msg)
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cirisnode_client.py:57:29: error: Incompatible
types in assignment (expression has type "str | None", variable has type "str") 
[assignment]
                self.base_url = node_cfg.base_url
                                ^~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/edge_manager.py:584:5: error:
Name "create_edges" already defined on line 26  [no-redef]
        async def create_edges(
        ^
ciris_engine/logic/services/graph/tsdb_consolidation/consolidators/metrics.py:209:16: error:
Incompatible return value type (got "GraphNode", expected "TSDBSummary | None") 
[return-value]
            return summary_node
                   ^~~~~~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/consolidators/memory.py:230:17: error:
Returning Any from function declared to return "str"  [no-any-return]
                    return config_type
                    ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/consolidators/memory.py:234:17: error:
Returning Any from function declared to return "str"  [no-any-return]
                    return key.split('.')[0]  # e.g., 'database' from 'dat...
                    ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/persistence/models/graph.py:50:21: error: Statement is
unreachable  [unreachable]
                        new_attrs = {}
                        ^~~~~~~~~~~~~~
ciris_engine/logic/persistence/models/graph.py:84:21: error: Dict entry 4 has
incompatible type "str": "int"; expected "str": "str | datetime | None" 
[dict-item]
                        "version": node.version,
                        ^~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/persistence/models/correlations.py:40:13: error: Statement
is unreachable  [unreachable]
                timestamp_str = str(corr.timestamp)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/persistence/models/correlations.py:181:55: error: Unexpected
keyword argument "timestamp" for "MetricData"  [call-arg]
                        correlation_data["metric_data"] = MetricData(
                                                          ^
ciris_engine/logic/persistence/models/correlations.py:276:55: error: Unexpected
keyword argument "timestamp" for "MetricData"  [call-arg]
                        correlation_data["metric_data"] = MetricData(
                                                          ^
ciris_engine/logic/telemetry/log_collector.py:30:31: error: Unexpected keyword
argument "log_level" for "ServiceCorrelation"  [call-arg]
                log_correlation = ServiceCorrelation(
                                  ^
ciris_engine/logic/telemetry/core.py:174:9: error: "SystemSnapshot" has no
attribute "telemetry"  [attr-defined]
            snapshot.telemetry = telemetry
            ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/base_graph_service.py:109:17: error: Returning Any
from function declared to return "str"  [no-any-return]
                    return graph_node.id
                    ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:122:24: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                created_at=self._time_service.now().isoformat(),
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:131:15: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            now = self._time_service.now()
                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:156:17: error: Statement is
unreachable  [unreachable]
                    defer_str = task.defer_until
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:184:21: error: Statement is
unreachable  [unreachable]
                        created_str = task.created_at
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:194:21: error: Statement is
unreachable  [unreachable]
                        triggered_str = task.last_triggered_at
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:230:74: error: Argument 3 to
"update_task_status" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ..._task_status(deferred_task_id, TaskStatus.PENDING, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:237:43: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        thought_id=f"thought_{self._time_service.now().tim...
                                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:242:32: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        created_at=self._time_service.now().isoformat(),
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:243:32: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        updated_at=self._time_service.now().isoformat(),
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:271:15: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            now = self._time_service.now()
                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:324:27: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            task_id = f"task_{self._time_service.now().timestamp()}"
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:463:32: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "deferred_at": self._time_service.now().isoformat(),
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:544:19: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                now = self._time_service.now()
                      ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/lifecycle/scheduler.py:554:21: error:
"TaskSchedulerService" has no attribute "_scheduler_task"; maybe
"schedule_task", "_run_scheduled_task", or "get_scheduled_tasks"? 
[attr-defined]
            return bool(self._scheduler_task and not self._shutdown_event....
                        ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/infrastructure/resource_monitor.py:67:16: error:
Incompatible return value type (got "TimeServiceProtocol | None", expected
"TimeServiceProtocol")  [return-value]
            return self._time_service
                   ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/infrastructure/resource_monitor.py:129:15: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            now = self._time_service.now()
                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/infrastructure/resource_monitor.py:159:24: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            current_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/infrastructure/resource_monitor.py:175:24: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            current_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/visibility.py:77:9: error: Returning Any
from function declared to return "ServiceType"  [no-any-return]
            return ServiceType.INFRASTRUCTURE_SERVICE
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/governance/visibility.py:77:16: error:
"type[ServiceType]" has no attribute "INFRASTRUCTURE_SERVICE"  [attr-defined]
            return ServiceType.INFRASTRUCTURE_SERVICE
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/support/thought_manager_enhanced.py:6:1: error:
Cannot find implementation or library stub for module named
"ciris_engine.schemas.memory.memory"  [import-not-found]
    from ciris_engine.schemas.memory.memory import Task, Thought, ThoughtT...
    ^
ciris_engine/logic/processors/support/thought_manager.py:51:31: error:
Incompatible types in assignment (expression has type "TaskContext", variable
has type "ThoughtContext | None")  [assignment]
                thought_context = task.context.model_copy()
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/support/thought_manager.py:75:22: error:
Incompatible types in assignment (expression has type "None", variable has type
"str")  [assignment]
            channel_id = None
                         ^~~~
ciris_engine/logic/processors/support/thought_manager.py:77:26: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "str")  [assignment]
                channel_id = task.context.channel_id
                             ^~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/persistence/maintenance.py:257:5: error: Return type
"dict[str, Any]" of "get_capabilities" incompatible with return type
"ServiceCapabilities" in supertype "BaseService"  [override]
        def get_capabilities(self) -> Dict[str, Any]:
        ^
ciris_engine/logic/persistence/maintenance.py:257:5: error: Return type
"dict[str, Any]" of "get_capabilities" incompatible with return type
"ServiceCapabilities" in supertype "ServiceProtocol"  [override]
        def get_capabilities(self) -> Dict[str, Any]:
        ^
ciris_engine/logic/persistence/maintenance.py:260:16: error: Incompatible
return value type (got "ServiceCapabilities", expected "dict[str, Any]") 
[return-value]
            return ServiceCapabilities(
                   ^
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:70:56: error:
Argument 2 to "MemoryBus" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ...            self._memory_bus = MemoryBus(registry, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:86:31: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                time_since_last = self._time_service.now() - self._last_an...
                                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:92:31: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        timestamp=self._time_service.now(),
                                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:105:35: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                self._last_analysis = self._time_service.now()
                                      ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:111:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now()
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:120:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:200:33: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        detected_at=self._time_service.now(),
                                    ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:217:29: error:
Incompatible types in assignment (expression has type "ActionFrequency | None",
variable has type "ActionFrequency")  [assignment]
                    freq_data = action_frequency.get(capability)
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:226:33: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        detected_at=self._time_service.now(),
                                    ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:278:37: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                            detected_at=self._time_service.now(),
                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:347:37: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                            detected_at=self._time_service.now(),
                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:376:60: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...          id=f"insight_{pattern.pattern_id}_{int(self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:414:38: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                id=f"learning_state_{int(self._time_service.now().timestam...
                                         ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:418:30: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "timestamp": self._time_service.now().isoformat(),
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:499:33: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        detected_at=self._time_service.now(),
                                    ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:562:52: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...                  last_seen=data["last_seen"] or self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:706:9: error:
Item "None" of "dict[str, float] | None" has no attribute "update"  [union-attr]
            status.custom_metrics.update({
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/pattern_analysis_loop.py:709:13: error:
Dict entry 2 has incompatible type "str": "str | None"; expected "str": "float" 
[dict-item]
                "last_analysis": self._last_analysis.isoformat() if self._...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:76:56: error:
Argument 2 to "MemoryBus" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ...            self._memory_bus = MemoryBus(registry, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:83:50: error:
Argument 2 to "WiseBus" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
                    self._wa_bus = WiseBus(registry, self._time_service)
                                                     ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:98:52: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...          baseline_id = f"identity_baseline_{int(self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:107:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:138:46: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                            baseline_established=self._time_service.now()
                                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:153:43: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                            "established_at": self._time_service.now().iso...
                                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:156:32: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        updated_at=self._time_service.now()
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:205:52: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...          baseline_id = f"identity_baseline_{int(self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:213:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:244:42: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        baseline_established=self._time_service.now()
                                             ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:290:31: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                time_since_last = self._time_service.now() - self._last_ch...
                                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:311:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:327:32: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                self._last_check = self._time_service.now()
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:337:48: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            snapshot_id = f"identity_snapshot_{int(self._time_service.now(...
                                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:362:23: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                timestamp=self._time_service.now(),
                          ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:397:42: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        baseline_established=self._time_service.now()
                                             ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:550:51: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...               request_id=f"variance_review_{int(self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:551:27: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:674:64: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...          first_seen=first_seen.get(action_type, self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:675:62: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...            last_seen=last_seen.get(action_type, self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:837:24: error:
Item "None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:876:5: error:
Return type "Coroutine[Any, Any, list[str]]" of "get_capabilities" incompatible
with return type "ServiceCapabilities" in supertype "BaseService"  [override]
        async def get_capabilities(self) -> List[str]:
        ^
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:876:5: error:
Return type "Coroutine[Any, Any, list[str]]" of "get_capabilities" incompatible
with return type "ServiceCapabilities" in supertype "ServiceProtocol" 
[override]
        async def get_capabilities(self) -> List[str]:
        ^
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:887:47: error:
Item "GraphNodeAttributes" of "GraphNodeAttributes | dict[str, Any]" has no
attribute "get"  [union-attr]
                if node.id == "agent/identity" or node.attributes.get("_no...
                                                  ^~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:938:9: error:
Item "None" of "dict[str, float] | None" has no attribute "update"  [union-attr]
            status.custom_metrics.update({
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:940:13: error:
Dict entry 1 has incompatible type "str": "str | None"; expected "str": "float" 
[dict-item]
                "last_variance_check": self._last_check.isoformat() if sel...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:946:5: error:
Name "get_capabilities" already defined on line 876  [no-redef]
        def get_capabilities(self) -> Any:
        ^
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:946:5: error:
Return type "Coroutine[Any, Any, list[str]]" of "get_capabilities" incompatible
with return type "ServiceCapabilities" in supertype "BaseService"  [override]
        def get_capabilities(self) -> Any:
        ^
ciris_engine/logic/infrastructure/sub_services/identity_variance_monitor.py:946:5: error:
Return type "Coroutine[Any, Any, list[str]]" of "get_capabilities" incompatible
with return type "ServiceCapabilities" in supertype "ServiceProtocol" 
[override]
        def get_capabilities(self) -> Any:
        ^
ciris_engine/logic/infrastructure/handlers/base_handler.py:93:26: error: Name
"ThoughtStatus" is not defined  [name-defined]
            status: Optional['ThoughtStatus'] = None
                             ^
ciris_engine/logic/infrastructure/handlers/base_handler.py:271:35: error:
Incompatible types in assignment (expression has type "dict[str, Any]", variable
has type
"ObserveParams | SpeakParams | ToolParams | PonderParams | RejectParams | DeferParams | MemorizeParams | RecallParams | ForgetParams | TaskCompleteParams")
 [assignment]
                        params_dict = params_dict.model_dump()
                                      ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/infrastructure/handlers/base_handler.py:275:35: error:
Argument "action_params" to "decapsulate_secrets_in_parameters" of
"SecretsService" has incompatible type
"ObserveParams | SpeakParams | ToolParams | PonderParams | RejectParams | DeferParams | MemorizeParams | RecallParams | ForgetParams | TaskCompleteParams";
expected "dict[Any, Any]"  [arg-type]
                        action_params=params_dict,
                                      ^~~~~~~~~~~
ciris_engine/logic/context/batch_context.py:65:49: error: Incompatible types in
assignment (expression has type "dict[str, Any]", variable has type
"str | None")  [assignment]
                        batch_data.agent_identity = {
                                                    ^
ciris_engine/logic/context/batch_context.py:88:44: error: Argument 1 to
"append" of "list" has incompatible type "TaskSummary"; expected "Task" 
[arg-type]
                batch_data.recent_tasks.append(TaskSummary(
                                               ^
ciris_engine/logic/context/batch_context.py:202: error: Unused "type: ignore"
comment  [unused-ignore]
            if hasattr(task.context, 'system_snapshot') and task.context.s...
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/context/batch_context.py:203: error: Unused "type: ignore"
comment  [unused-ignore]
                channel_id = str(task.context.system_snapshot.channel_id) ...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/base_adapter.py:67:23: error: Unexpected keyword
argument "trace_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:67:23: error: Unexpected keyword
argument "parent_span_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:67:23: error: Unexpected keyword
argument "span_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:67:23: error: Unexpected keyword
argument "channel_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:83:27: error: Unexpected keyword
argument "service_type" for "ServiceResponseData"  [call-arg]
                response_data=ServiceResponseData(
                              ^
ciris_engine/logic/adapters/base_adapter.py:83:27: error: Unexpected keyword
argument "method_name" for "ServiceResponseData"  [call-arg]
                response_data=ServiceResponseData(
                              ^
ciris_engine/logic/adapters/base_adapter.py:126:23: error: Unexpected keyword
argument "trace_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:126:23: error: Unexpected keyword
argument "parent_span_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:126:23: error: Unexpected keyword
argument "span_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:126:23: error: Unexpected keyword
argument "channel_id" for "ServiceCorrelation"  [call-arg]
            correlation = ServiceCorrelation(
                          ^
ciris_engine/logic/adapters/base_adapter.py:142:27: error: Unexpected keyword
argument "service_type" for "ServiceResponseData"  [call-arg]
                response_data=ServiceResponseData(
                              ^
ciris_engine/logic/adapters/base_adapter.py:142:27: error: Unexpected keyword
argument "method_name" for "ServiceResponseData"  [call-arg]
                response_data=ServiceResponseData(
                              ^
ciris_engine/logic/adapters/cli/cli_wa_service.py:14:1: error: Cannot find
implementation or library stub for module named
"ciris_engine.logic.services.infrastructure.time"  [import-not-found]
    from ciris_engine.logic.services.infrastructure.time import TimeServic...
    ^
ciris_engine/logic/adapters/cli/cli_wa_service.py:14:1: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
ciris_engine/logic/adapters/cli/cli_wa_service.py:28:15: error: Call to
abstract method "start" of "ServiceProtocol" with trivial body via super() is
unsafe  [safe-super]
            await super().start()
                  ^~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/cli_wa_service.py:32:15: error: Call to
abstract method "stop" of "ServiceProtocol" with trivial body via super() is
unsafe  [safe-super]
            await super().stop()
                  ^~~~~~~~~~~~
ciris_engine/logic/adapters/cli/cli_wa_service.py:51:5: error: Return type
"Coroutine[Any, Any, bool]" of "send_deferral" incompatible with return type
"Coroutine[Any, Any, str]" in supertype "WiseAuthorityServiceProtocol" 
[override]
        async def send_deferral(self, context: DeferralContext) -> bool:
        ^
ciris_engine/logic/adapters/cli/cli_wa_service.py:51:35: error: Argument 1 of
"send_deferral" is incompatible with supertype "WiseAuthorityServiceProtocol";
supertype defines the argument type as "DeferralRequest"  [override]
        async def send_deferral(self, context: DeferralContext) -> bool:
                                      ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/cli_wa_service.py:51:35: note: This violates the Liskov substitution principle
ciris_engine/logic/adapters/cli/cli_wa_service.py:51:35: note: See https://mypy.readthedocs.io/en/stable/common_issues.html#incompatible-overrides
ciris_engine/logic/adapters/cli/cli_tools.py:42:15: error: Call to abstract
method "start" of "ServiceProtocol" with trivial body via super() is unsafe 
[safe-super]
            await super().start()
                  ^~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/cli_tools.py:46:15: error: Call to abstract
method "stop" of "ServiceProtocol" with trivial body via super() is unsafe 
[safe-super]
            await super().stop()
                  ^~~~~~~~~~~~
ciris_engine/logic/adapters/cli/cli_adapter.py:691:32: error: "CLIAdapter" has
no attribute "_interactive"; maybe "interactive"?  [attr-defined]
                    "interactive": self._interactive,
                                   ^~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/routes/memory.py:903:33: error: Name "params"
already defined on line 828  [no-redef]
                                    params: List[Any] = [day_start.isoform...
                                    ^~~~~~
ciris_engine/logic/adapters/api/routes/memory.py:957:29: error: Incompatible
types in assignment (expression has type "MemoryQuery", variable has type "str")
 [assignment]
                        query = MemoryQuery(
                                ^
ciris_engine/logic/adapters/api/routes/memory.py:968:25: error: Incompatible
types in assignment (expression has type "MemoryQuery", variable has type "str")
 [assignment]
                    query = MemoryQuery(
                            ^
ciris_engine/logic/adapters/api/routes/memory.py:1043:52: error: Argument
"hours" to "timedelta" has incompatible type "Literal[0] | None"; expected
"float"  [arg-type]
                    start_time = now - timedelta(hours=hours)
                                                       ^~~~~
ciris_engine/logic/adapters/api/routes/memory.py:1067:29: error: Name "params"
already defined on line 828  [no-redef]
                                params: List[Any] = [day_start.isoformat()...
                                ^~~~~~
ciris_engine/logic/adapters/api/routes/memory.py:1136:25: error: Incompatible
types in assignment (expression has type "MemoryQuery", variable has type "str")
 [assignment]
                    query = MemoryQuery(
                            ^
ciris_engine/logic/adapters/api/routes/agent.py:349:27: error: Argument 1 to
"sorted" has incompatible type "list[dict[str, Any]]"; expected
"Iterable[ConversationMessage]"  [arg-type]
            messages = sorted(fetched_messages, 
                              ^~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:350:40: error: Value of type
"ConversationMessage" is not indexable  [index]
                             key=lambda m: m["timestamp"] if isinstance(m[...
                                           ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:355:49: error: Value of type
"ConversationMessage" is not indexable  [index]
                messages = [m for m in messages if (m["timestamp"] if isin...
                                                    ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:361:29: error: Value of type
"ConversationMessage" is not indexable  [index]
                timestamp_val = msg["timestamp"]
                                ^~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:365:24: error:
"ConversationMessage" has no attribute "get"  [attr-defined]
                    id=str(msg.get("message_id", "")),
                           ^~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:366:28: error:
"ConversationMessage" has no attribute "get"  [attr-defined]
                    author=str(msg.get("author_name") or msg.get("author_i...
                               ^~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:367:29: error:
"ConversationMessage" has no attribute "get"  [attr-defined]
                    content=str(msg.get("content", "")),
                                ^~~~~~~
ciris_engine/logic/adapters/api/routes/agent.py:369:31: error:
"ConversationMessage" has no attribute "get"  [attr-defined]
                    is_agent=bool(msg.get("is_agent_message", False))
                                  ^~~~~~~
ciris_engine/logic/services/mixins/example_usage.py:117:5: error: Function is
missing a return type annotation  [no-untyped-def]
        def __init__(self):
        ^
ciris_engine/logic/services/mixins/example_usage.py:117:5: note: Use "-> None" if function does not return a value
ciris_engine/logic/services/mixins/example_usage.py:154:1: error: Function is
missing a return type annotation  [no-untyped-def]
    async def api_endpoint_with_metrics(service: MetricsEnabledGraphServic...
    ^
ciris_engine/logic/services/graph/telemetry_service.py:121:1: error: Cannot
find implementation or library stub for module named
"ciris_engine.logic.registries.service_registry"  [import-not-found]
                    from ciris_engine.logic.registries.service_registry im...
    ^
ciris_engine/logic/services/graph/telemetry_service.py:319:35: error: Subclass
of "datetime" and "str" cannot exist: would have incompatible method signatures 
[unreachable]
                        if isinstance(timestamp_value, str):
                                      ^~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/telemetry_service.py:320:25: error: Statement
is unreachable  [unreachable]
                            try:
                            ^
ciris_engine/logic/services/graph/telemetry_service.py:930:72: error: Name
"timezone" is not defined  [name-defined]
    ...              dt_timestamp = dt_timestamp.replace(tzinfo=timezone.utc)
                                                                ^~~~~~~~
ciris_engine/logic/services/graph/telemetry_service.py:936:76: error: Name
"timezone" is not defined  [name-defined]
    ...              dt_timestamp = dt_timestamp.replace(tzinfo=timezone.utc)
                                                                ^~~~~~~~
ciris_engine/logic/services/graph/memory_service.py:136:33: error: Unsupported
target for indexed assignment ("dict[str, Any] | GraphNodeAttributes")  [index]
                                    attrs_dict["_edges"] = edges_data
                                    ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/memory_service.py:202:29: error: Unsupported
target for indexed assignment ("dict[str, Any] | GraphNodeAttributes")  [index]
                                attrs_dict["_edges"] = edges_data
                                ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/memory_service.py:269:53: error: Unsupported
target for indexed assignment ("dict[str, Any] | GraphNodeAttributes")  [index]
    ...                                                 attrs_dict["_edges"] ...
                                                        ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/memory_service.py:375:13: error: Statement is
unreachable  [unreachable]
                attributes_dict = {}
                ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/memory_service.py:422:13: error: Statement is
unreachable  [unreachable]
                attributes_dict = {}
                ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/incident_service.py:44:5: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
        def __init__(self, memory_bus=None, time_service=None) -> None:
        ^
ciris_engine/logic/services/graph/incident_service.py:112:28: error: Item
"None" of "MemoryBus | None" has no attribute "memorize"  [union-attr]
                result = await self._memory_bus.memorize(
                               ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/incident_service.py:129:5: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
        async def _get_recent_incidents(self, cutoff_time) -> List[Inciden...
        ^
ciris_engine/logic/services/graph/incident_service.py:156:21: error: Unexpected
keyword argument "conditions" for "MemoryQuery"  [call-arg]
                query = MemoryQuery(
                        ^
ciris_engine/logic/services/graph/incident_service.py:156:21: error: Unexpected
keyword argument "limit" for "MemoryQuery"  [call-arg]
                query = MemoryQuery(
                        ^
ciris_engine/logic/services/graph/incident_service.py:230:42: error: Name
"filename" is not defined  [name-defined]
                                    filename=filename,
                                             ^~~~~~~~
ciris_engine/logic/services/graph/incident_service.py:311:28: error: Item
"None" of "MemoryBus | None" has no attribute "memorize"  [union-attr]
                result = await self._memory_bus.memorize(
                               ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/incident_service.py:541:24: error: Item
"None" of "MemoryBus | None" has no attribute "memorize"  [union-attr]
            result = await self._memory_bus.memorize(
                           ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/incident_service.py:558:28: error:
Incompatible types in assignment (expression has type "datetime", variable has
type "None")  [assignment]
            self._start_time = self._time_service.now() if self._time_serv...
                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/services/graph/incident_service.py:589:13: error: Statement
is unreachable  [unreachable]
                uptime_seconds = (current_time - self._start_time).total_s...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/services/graph/audit_service.py:159:70: error: Argument 2 to
"MemoryBus" has incompatible type "TimeServiceProtocol | None"; expected
"TimeServiceProtocol"  [arg-type]
    ...lf._memory_bus = MemoryBus(self._service_registry, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:171:28: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            self._start_time = self._time_service.now()
                               ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:241:27: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:297:9: error: Statement is
unreachable  [unreachable]
            elif isinstance(event_data, AuditEventData):
            ^
ciris_engine/logic/services/graph/audit_service.py:321:27: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    timestamp=self._time_service.now(),
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:444:13: error: Incompatible
types in assignment (expression has type "AuditEntry", variable has type
"AuditRequest")  [assignment]
                for e in results:
                ^
ciris_engine/logic/services/graph/audit_service.py:446:41: error: Incompatible
types in assignment (expression has type "AuditRequest", target has type
"AuditEntry")  [assignment]
                        all_entries[e.id] = e
                                            ^
ciris_engine/logic/services/graph/audit_service.py:500:48: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                timestamp = attrs.get("timestamp", self._time_service.now(...
                                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:505:33: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        timestamp = self._time_service.now()
                                    ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:521:44: error: Incompatible
types in assignment (expression has type "str | int | float | None", target has
type "str | int | float | bool")  [assignment]
                                flat_data[k] = v
                                               ^
ciris_engine/logic/services/graph/audit_service.py:578:22: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            start_time = self._time_service.now()
                         ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:588:40: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    verification_completed=self._time_service.now(),
                                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:595:24: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                end_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:620:24: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                end_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:635:22: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            start_time = self._time_service.now()
                         ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:645:40: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    verification_completed=self._time_service.now(),
                                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:655:24: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                end_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:687:21: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            timestamp = self._time_service.now().strftime("%Y%m%d_%H%M%S")
                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:1086:25: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                return int((self._time_service.now() - start_time).total_s...
                            ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:1170:25: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                timestamp = self._time_service.now()
                            ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/audit_service.py:1194:9: error: Need type
annotation for "results" (hint: "results: list[<type>] = ...")  [var-annotated]
            results = []
            ^~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/service.py:582:13: error:
No return value expected  [return-value]
                return total_deleted
                ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/service.py:586:13: error:
No return value expected  [return-value]
                return 0
                ^~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/service.py:662:13: error:
Returning Any from function declared to return "bool"  [no-any-return]
                return count > 0
                ^~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/tsdb_consolidation/service.py:679:18: error:
Function does not return a value (it only ever returns None) 
[func-returns-value]
            result = await self._cleanup_old_data()
                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/handlers/memory/recall_handler.py:148:60: error:
Incompatible types in assignment (expression has type
"list[dict[str, dict[str, Any] | str]]", target has type "Collection[str]") 
[assignment]
    ...                        node_info["connected_nodes"] = connected_nodes
                                                              ^~~~~~~~~~~~~~~
ciris_engine/logic/handlers/memory/memorize_handler.py:101:48: error: Value of
type "GraphNodeAttributes | dict[str, Any]" is not indexable  [index]
                            content_preview = f": {node.attributes['conten...
                                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/handlers/memory/memorize_handler.py:103:47: error: Value of
type "GraphNodeAttributes | dict[str, Any]" is not indexable  [index]
                            content_preview = f": {node.attributes['name']...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/handlers/memory/memorize_handler.py:105:47: error: Value of
type "GraphNodeAttributes | dict[str, Any]" is not indexable  [index]
                            content_preview = f": {node.attributes['value'...
                                                  ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/handlers/external/tool_handler.py:47:22: error: Incompatible
types in assignment (expression has type "None", variable has type "ToolParams")
 [assignment]
                params = None
                         ^~~~
ciris_engine/logic/handlers/external/tool_handler.py:51:13: error: Statement is
unreachable  [unreachable]
                self.logger.error(
                ^
ciris_engine/logic/handlers/external/tool_handler.py:106:28: error:
Incompatible types in assignment (expression has type "str | None", variable has
type "str")  [assignment]
                follow_up_id = await self.complete_thought_and_create_foll...
                               ^
ciris_engine/logic/handlers/control/reject_handler.py:45:13: error: Statement
is unreachable  [unreachable]
                self.logger.error(f"REJECT action params are not RejectPar...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"ObserveParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"SpeakParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"ToolParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"PonderParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"RejectParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"DeferParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"MemorizeParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"RecallParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"ForgetParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:31:23: error: Subclass of
"TaskCompleteParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
            if isinstance(params, dict):
                          ^~~~~~
ciris_engine/logic/handlers/control/ponder_handler.py:32:13: error: Statement
is unreachable  [unreachable]
                ponder_params = PonderParams(**params)
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"ObserveParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"SpeakParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"ToolParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"PonderParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"RejectParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"DeferParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"MemorizeParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"RecallParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"ForgetParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:48:27: error: Subclass of
"TaskCompleteParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                if isinstance(raw_params, dict):
                              ^~~~~~~~~~
ciris_engine/logic/handlers/control/defer_handler.py:49:17: error: Statement is
unreachable  [unreachable]
                    defer_params_obj = DeferParams(**raw_params)
                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_observer.py:105:51: error: Argument
1 to "_extract_channel_id" of "DiscordObserver" has incompatible type
"str | None"; expected "str"  [arg-type]
            raw_channel_id = self._extract_channel_id(msg.channel_id)
                                                      ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_observer.py:176:51: error: Argument
1 to "_extract_channel_id" of "DiscordObserver" has incompatible type
"str | None"; expected "str"  [arg-type]
            raw_channel_id = self._extract_channel_id(msg.channel_id)
                                                      ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_observer.py:206:51: error: Argument
1 to "_extract_channel_id" of "DiscordObserver" has incompatible type
"str | None"; expected "str"  [arg-type]
            raw_channel_id = self._extract_channel_id(msg.channel_id)
                                                      ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_observer.py:293:98: error: Argument
3 to "update_task_status" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ...sk_status(original_task.task_id, TaskStatus.ACTIVE, self.time_service)
                                                           ^~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_observer.py:324:48: error:
Incompatible types in assignment (expression has type
"ProcessingThoughtContext", variable has type "ThoughtContext")  [assignment]
                                guidance_context = ProcessingThoughtContex...
                                                   ^
ciris_engine/logic/adapters/discord/discord_adapter.py:299:21: error: Returning
Any from function declared to return "list[dict[str, Any]]"  [no-any-return]
                        return await self._retry_discord_operation(
                        ^
ciris_engine/logic/adapters/discord/discord_adapter.py:320:20: error:
Incompatible return value type (got "bool", expected "str | None") 
[return-value]
                return False
                       ^~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:823:20: error:
Incompatible return value type (got "bool", expected "str")  [return-value]
                return False
                       ^~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:904:31: error: Name
"GraphScope" is not defined  [name-defined]
                            scope=GraphScope.LOCAL,
                                  ^~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:905:36: error: Name
"GraphNodeAttributes" is not defined  [name-defined]
                            attributes=GraphNodeAttributes(
                                       ^~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:1024:29: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                uptime_seconds=(self._time_service.now() - self._start_tim...
                                ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:1094:32: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                self._start_time = self._time_service.now()
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/discord_adapter.py:1107:1: error: Cannot
find implementation or library stub for module named
"ciris_engine.logic.services.identity"  [import-not-found]
                        from ciris_engine.logic.services.identity import S...
    ^
ciris_engine/logic/adapters/discord/discord_adapter.py:1245:84: error: Argument
1 to "int" has incompatible type "bool | str | None"; expected
"str | Buffer | SupportsInt | SupportsIndex | SupportsTrunc"  [arg-type]
    ...l = self._channel_manager.client.get_channel(int(channel_info["channel...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/discord/discord_adapter.py:1247:59: error: Item
"PrivateChannel" of
"VoiceChannel | StageChannel | ForumChannel | TextChannel | CategoryChannel | Thread | PrivateChannel"
has no attribute "name"  [union-attr]
    ...               channel_info["channel_name"] = f"#{discord_channel.name...
                                                        ^~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_communication.py:272:31: error: Argument
"key" to "sort" of "list" has incompatible type
"Callable[[dict[str, object]], object]"; expected
"Callable[[dict[str, object]], SupportsDunderLT[Any] | SupportsDunderGT[Any]]" 
[arg-type]
                messages.sort(key=lambda m: m["timestamp"])
                                  ^
ciris_engine/logic/adapters/api/api_communication.py:272:41: error:
Incompatible return value type (got "object", expected
"SupportsDunderLT[Any] | SupportsDunderGT[Any]")  [return-value]
                messages.sort(key=lambda m: m["timestamp"])
                                            ^~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_communication.py:301:29: error: Name
"ServiceStatus" is not defined  [name-defined]
        def get_status(self) -> "ServiceStatus":
                                ^
ciris_engine/logic/adapters/api/api_communication.py:331:35: error: Name
"ServiceCapabilities" is not defined  [name-defined]
        def get_capabilities(self) -> "ServiceCapabilities":
                                      ^
ciris_engine/logic/telemetry/__init__.py:17:1: error: Cannot find
implementation or library stub for module named
"ciris_engine.logic.telemetry.collectors"  [import-not-found]
    from .collectors import (
    ^
ciris_engine/logic/services/graph/config_service.py:17:14: error: Incompatible
types in assignment (expression has type "None", variable has type Module) 
[assignment]
        psutil = None
                 ^~~~
ciris_engine/logic/services/graph/config_service.py:44:48: error: Function
"builtins.callable" is not valid as a type  [valid-type]
            self._config_listeners: Dict[str, List[callable]] = {}  # key_...
                                                   ^
ciris_engine/logic/services/graph/config_service.py:44:48: note: Perhaps you meant "typing.Callable" instead of "callable"?
ciris_engine/logic/services/graph/config_service.py:50:28: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            self._start_time = self._time_service.now()
                               ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/config_service.py:170:13: error: Statement is
unreachable  [unreachable]
                safe_key = ''.join(c if c.isprintable() and c not in '\n\r...
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/services/graph/config_service.py:196:24: error: Item "None"
of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now(),
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/config_service.py:208:5: error: Return type
"Coroutine[Any, Any, dict[str, ConfigValue]]" of "list_configs" incompatible
with return type
"Coroutine[Any, Any, dict[str, str | int | float | bool | list[Any] | dict[Any, Any]]]"
in supertype "GraphConfigServiceProtocol"  [override]
        async def list_configs(self, prefix: Optional[str] = None) -> Dict...
        ^
ciris_engine/logic/services/graph/config_service.py:229:68: error: Function
"builtins.callable" is not valid as a type  [valid-type]
    ...r_config_listener(self, key_pattern: str, callback: callable) -> None:
                                                           ^
ciris_engine/logic/services/graph/config_service.py:229:68: note: Perhaps you meant "typing.Callable" instead of "callable"?
ciris_engine/logic/services/graph/config_service.py:241:70: error: Function
"builtins.callable" is not valid as a type  [valid-type]
    ...r_config_listener(self, key_pattern: str, callback: callable) -> None:
                                                           ^
ciris_engine/logic/services/graph/config_service.py:241:70: note: Perhaps you meant "typing.Callable" instead of "callable"?
ciris_engine/logic/services/graph/config_service.py:248:60: error: Function
"builtins.any" is not valid as a type  [valid-type]
    ...def _notify_listeners(self, key: str, old_value: any, new_value: any) ...
                                                        ^
ciris_engine/logic/services/graph/config_service.py:248:60: note: Perhaps you meant "typing.Any" instead of "any"?
ciris_engine/logic/services/graph/config_service.py:259:35: error: callable?
not callable  [misc]
                                await callback(key, old_value, new_value)
                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/graph/config_service.py:261:29: error: callable?
not callable  [misc]
                                callback(key, old_value, new_value)
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:132:56: error:
Argument 2 to "MemoryBus" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ...            self._memory_bus = MemoryBus(registry, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:143:38: error:
Cannot instantiate abstract class "IdentityVarianceMonitor" with abstract
attributes "_check_dependencies", "_get_actions" and "get_service_type" 
[abstract]
                self._variance_monitor = IdentityVarianceMonitor(
                                         ^
ciris_engine/logic/services/adaptation/self_observation.py:144:30: error:
Argument "time_service" to "IdentityVarianceMonitor" has incompatible type
"TimeServiceProtocol | None"; expected "TimeServiceProtocol"  [arg-type]
                    time_service=self._time_service,
                                 ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:152:34: error:
Cannot instantiate abstract class "PatternAnalysisLoop" with abstract attributes
"_check_dependencies", "_get_actions" and "get_service_type"  [abstract]
                self._pattern_loop = PatternAnalysisLoop(
                                     ^
ciris_engine/logic/services/adaptation/self_observation.py:153:30: error:
Argument "time_service" to "PatternAnalysisLoop" has incompatible type
"TimeServiceProtocol | None"; expected "TimeServiceProtocol"  [arg-type]
                    time_service=self._time_service,
                                 ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:181:72: error:
Argument 1 to "initialize_baseline" of "IdentityVarianceMonitor" has
incompatible type
"ciris_engine.schemas.services.special.self_observation.AgentIdentityRoot";
expected "ciris_engine.schemas.runtime.core.AgentIdentityRoot"  [arg-type]
    ...seline_id = await self._variance_monitor.initialize_baseline(identity)
                                                                    ^~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:186:45: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                id=f"self_observation_init_{int(self._time_service.now().t...
                                                ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:193:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "timestamp": self._time_service.now().isoformat()
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:196:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:235:31: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                time_since_last = self._time_service.now() - self._last_ad...
                                  ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:259:32: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        started_at=self._time_service.now(),
                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:260:34: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                        completed_at=self._time_service.now(),
                                     ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:274:46: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                cycle_id = f"variance_check_{int(self._time_service.now()....
                                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:289:28: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    started_at=self._time_service.now(),
                               ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:290:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    completed_at=self._time_service.now(),
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:314:28: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    started_at=self._time_service.now(),
                               ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:315:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    completed_at=self._time_service.now(),
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:334:59: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...   id=f"cycle_event_{cycle_id}_{event_type}_{int(self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:341:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "timestamp": self._time_service.now().isoformat()
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:344:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:366:88: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...pleted_at.isoformat() if cycle.completed_at else self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:369:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:398:37: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                time_since_last_change=(self._time_service.now() - self._l...
                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:424:41: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                id=f"wa_review_outcome_{int(self._time_service.now().times...
                                            ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:431:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "timestamp": self._time_service.now().isoformat()
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:434:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:447:38: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                id=f"emergency_stop_{int(self._time_service.now().timestam...
                                         ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:454:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    "timestamp": self._time_service.now().isoformat()
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:457:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                updated_at=self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:479:48: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                self._current_cycle.completed_at = self._time_service.now(...
                                                   ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:530:9: error: Item
"None" of "dict[str, float] | None" has no attribute "update"  [union-attr]
            status.custom_metrics.update({
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:558:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            current_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:612:28: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    started_at=self._time_service.now(),
                               ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:613:30: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                    completed_at=self._time_service.now(),
                                 ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:707:24: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            current_time = self._time_service.now()
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:757:23: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                timestamp=self._time_service.now(),
                          ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:779:23: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            cutoff_time = self._time_service.now() - timedelta(hours=hours...
                          ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:819:27: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
                cutoff_time = self._time_service.now() - timedelta(hours=h...
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:840:79: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
    ...=timestamps_sorted[-1] if timestamps_sorted else self._time_service.no...
                                                        ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/adaptation/self_observation.py:985:27: error: Item
"None" of "TimeServiceProtocol | None" has no attribute "now"  [union-attr]
            time_since_last = self._time_service.now() - self._last_adapta...
                              ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/adapter.py:24:9: error: Incompatible types
in assignment (expression has type "DiscordAdapterConfig", base class "Service"
defined the type as "dict[Any, Any]")  [assignment]
            self.config: DiscordAdapterConfig
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/adapter.py:103:24: error: Argument
"on_message" to "DiscordAdapter" has incompatible type
"Callable[[DiscordMessage], Coroutine[Any, Any, None]]"; expected
"Callable[[IncomingMessage], Awaitable[None]] | None"  [arg-type]
                on_message=self._handle_discord_message_event,
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/adapter.py:160:9: error: Statement is
unreachable  [unreachable]
            if not isinstance(msg, DiscordMessage): # Ensure it's the corr...
            ^
ciris_engine/logic/adapters/discord/adapter.py:209:33: error: Incompatible
types in assignment (expression has type "DiscordObserver", variable has type
"None")  [assignment]
            self.discord_observer = DiscordObserver(
                                    ^
ciris_engine/logic/adapters/discord/adapter.py:225:19: error: "None" has no
attribute "start"  [attr-defined]
                await self.discord_observer.start()
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/discord/adapter.py:436:19: error: "None" has no
attribute "stop"  [attr-defined]
                await self.discord_observer.stop()
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/adapter.py:17:5: error: Incompatible types in
assignment (expression has type "CLIAdapterConfig", base class "Service" defined
the type as "dict[Any, Any]")  [assignment]
        config: CLIAdapterConfig  # Type annotation to override parent's d...
        ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/adapter.py:82:9: error: Statement is
unreachable  [unreachable]
            if not isinstance(msg, IncomingMessage):
            ^
ciris_engine/logic/adapters/cli/adapter.py:131:37: error: Incompatible types in
assignment (expression has type "CLIObserver", variable has type "None") 
[assignment]
                    self.cli_observer = CLIObserver(
                                        ^
ciris_engine/logic/adapters/cli/adapter.py:132:32: error: Argument "on_observe"
to "CLIObserver" has incompatible type
"Callable[[IncomingMessage], Coroutine[Any, Any, None]]"; expected
"Callable[[dict[Any, Any]], Awaitable[None]]"  [arg-type]
                        on_observe=self.on_observe,
                                   ^~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/adapter.py:149:13: error: Statement is
unreachable  [unreachable]
                await self.cli_observer.start()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/cli/adapter.py:160:34: error: Right operand of
"and" is never evaluated  [unreachable]
            if self.cli_observer and hasattr(self.cli_observer, '_stop_eve...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/cli/adapter.py:161:13: error: Statement is
unreachable  [unreachable]
                stop_event_task = asyncio.create_task(
                ^
ciris_engine/logic/adapters/cli/adapter.py:197:13: error: Statement is
unreachable  [unreachable]
                await self.cli_observer.stop()
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/app.py:68:9: error: Function is missing a
return type annotation  [no-untyped-def]
            async def rate_limit_wrapper(request: Request, call_next):
            ^
ciris_engine/logic/adapters/api/app.py:68:9: error: Function is missing a type
annotation for one or more arguments  [no-untyped-def]
            async def rate_limit_wrapper(request: Request, call_next):
            ^
ciris_engine/logic/adapters/api/app.py:68:47: error: Name "Request" is not
defined  [name-defined]
            async def rate_limit_wrapper(request: Request, call_next):
                                                  ^
ciris_engine/logic/processors/core/base_processor.py:43:50: error: Incompatible
types in assignment (expression has type "Any | None", variable has type
"TimeServiceProtocol")  [assignment]
            self.time_service: TimeServiceProtocol = services.get('time_se...
                                                     ^~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"ObserveParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"SpeakParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"ToolParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"PonderParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"RejectParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"DeferParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"MemorizeParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"RecallParams" and "dict[Any, Any]" cannot exist: would have incompatible method
signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:24:31: error: Subclass of
"TaskCompleteParams" and "dict[Any, Any]" cannot exist: would have incompatible
method signatures  [unreachable]
                    if isinstance(params, dict):
                                  ^~~~~~
ciris_engine/logic/handlers/memory/forget_handler.py:25:21: error: Statement is
unreachable  [unreachable]
                        params = ForgetParams(**params)
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/states/work_processor.py:27:5: error: Function is
missing a type annotation for one or more arguments  [no-untyped-def]
        def __init__(
        ^
ciris_engine/logic/processors/states/work_processor.py:48:29: error:
Incompatible types in assignment (expression has type "Any | None", variable has
type "TimeServiceProtocol")  [assignment]
            self.time_service = services.get("time_service")
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/states/solitude_processor.py:218:13: error:
Unsupported target for indexed assignment ("ExitConditions")  [index]
                conditions["should_exit"] = True
                ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/states/shutdown_processor.py:161:24: error:
Incompatible return value type (got "dict[Any, Any] | None", expected
"dict[Any, Any]")  [return-value]
                    return self.shutdown_result
                           ^~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/states/dream_processor.py:316:45: error: Cannot
instantiate abstract class "SelfObservationService" with abstract attributes
"_check_dependencies", "_get_actions" and "get_service_type"  [abstract]
                self.self_observation_service = SelfObservationService(
                                                ^
ciris_engine/logic/dma/pdma.py:65:5: error: Signature of "evaluate"
incompatible with supertype "BaseDMAProtocol"  [override]
        async def evaluate(self, input_data: ProcessingQueueItem, context:...
        ^
ciris_engine/logic/dma/pdma.py:65:5: note:      Superclass:
ciris_engine/logic/dma/pdma.py:65:5: note:          def evaluate(self, context: DMAContext) -> Coroutine[Any, Any, DMADecision]
ciris_engine/logic/dma/pdma.py:65:5: note:      Subclass:
ciris_engine/logic/dma/pdma.py:65:5: note:          def evaluate(self, input_data: ProcessingQueueItem, context: ThoughtState | None = ..., **kwargs: Any) -> Coroutine[Any, Any, EthicalDMAResult]
ciris_engine/logic/dma/dsdma_base.py:81:5: error: Signature of "evaluate"
incompatible with supertype "BaseDMAProtocol"  [override]
        async def evaluate(
        ^
ciris_engine/logic/dma/dsdma_base.py:81:5: note:      Superclass:
ciris_engine/logic/dma/dsdma_base.py:81:5: note:          def evaluate(self, context: DMAContext) -> Coroutine[Any, Any, DMADecision]
ciris_engine/logic/dma/dsdma_base.py:81:5: note:      Subclass:
ciris_engine/logic/dma/dsdma_base.py:81:5: note:          def evaluate(self, input_data: ProcessingQueueItem, current_context: dict[str, Any] | None = ..., **kwargs: Any) -> Coroutine[Any, Any, DSDMAResult]
ciris_engine/logic/dma/dsdma_base.py:127:62: error: "ThoughtState" has no
attribute "identity_context"  [attr-defined]
    ...if not current_context.processing_context or not current_context.proce...
                                                        ^~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/dma/dsdma_base.py:129:30: error: "ThoughtState" has no
attribute "identity_context"  [attr-defined]
                identity_block = current_context.processing_context.identi...
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/dma/csdma.py:195:5: error: Signature of "evaluate"
incompatible with supertype "BaseDMAProtocol"  [override]
        async def evaluate(self, input_data: ProcessingQueueItem, **kwargs...
        ^
ciris_engine/logic/dma/csdma.py:195:5: note:      Superclass:
ciris_engine/logic/dma/csdma.py:195:5: note:          def evaluate(self, context: DMAContext) -> Coroutine[Any, Any, DMADecision]
ciris_engine/logic/dma/csdma.py:195:5: note:      Subclass:
ciris_engine/logic/dma/csdma.py:195:5: note:          def evaluate(self, input_data: ProcessingQueueItem, **kwargs: Any) -> Coroutine[Any, Any, CSDMAResult]
ciris_engine/logic/dma/action_selection_pdma.py:71:5: error: Signature of
"evaluate" incompatible with supertype "BaseDMAProtocol"  [override]
        async def evaluate(
        ^
ciris_engine/logic/dma/action_selection_pdma.py:71:5: note:      Superclass:
ciris_engine/logic/dma/action_selection_pdma.py:71:5: note:          def evaluate(self, context: DMAContext) -> Coroutine[Any, Any, DMADecision]
ciris_engine/logic/dma/action_selection_pdma.py:71:5: note:      Subclass:
ciris_engine/logic/dma/action_selection_pdma.py:71:5: note:          def evaluate(self, input_data: dict[str, Any], enable_recursive_evaluation: bool = ..., **kwargs: Any) -> Coroutine[Any, Any, ActionSelectionDMAResult]
ciris_engine/logic/context/system_snapshot.py:159:25: error: Incompatible types
in assignment (expression has type "GraphNodeAttributes | dict[str, Any]",
variable has type "dict[str, Any]")  [assignment]
                    attrs = identity_result.attributes
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/context/system_snapshot.py:173:21: error: Statement is
unreachable  [unreachable]
                        attrs_dict = attrs.model_dump() if hasattr(attrs, ...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/processors/states/play_processor.py:39:5: error: Return type
"Coroutine[Any, Any, PlayResult]" of "process" incompatible with return type
"Coroutine[Any, Any, WorkResult]" in supertype "WorkProcessor"  [override]
        async def process(self, round_number: int) -> PlayResult:
        ^
ciris_engine/logic/processors/support/dma_orchestrator.py:269:12: error:
"ThoughtState" has no attribute "system_snapshot"  [attr-defined]
            if processing_context.system_snapshot and processing_context.s...
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/support/dma_orchestrator.py:270:45: error:
"ThoughtState" has no attribute "system_snapshot"  [attr-defined]
                channel_id = extract_channel_id(processing_context.system_...
                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/processors/support/dma_orchestrator.py:272:31: error:
"ThoughtState" has no attribute "initial_task_context"  [attr-defined]
            if not channel_id and processing_context.initial_task_context:
                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/processors/support/dma_orchestrator.py:273:39: error:
"ThoughtState" has no attribute "initial_task_context"  [attr-defined]
                channel_context = getattr(processing_context.initial_task_...
                                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/processors/core/main_processor.py:501:53: error:
Incompatible types in assignment (expression has type "Thought", target has type
"str")  [assignment]
    ...                 context["prefetched_thought"] = thought  # Pass the f...
                                                        ^~~~~~~
ciris_engine/logic/runtime/adapter_manager.py:525:38: error: Incompatible types
in assignment (expression has type "None", target has type "str")  [assignment]
                        sanitized[key] = None
                                         ^~~~
ciris_engine/logic/runtime/adapter_manager.py:528:34: error: Incompatible types
in assignment (expression has type "dict[Any, Any]", target has type "str") 
[assignment]
                    sanitized[key] = self._sanitize_config_params(adapter_...
                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/runtime/adapter_manager.py:804:68: error: Function
"builtins.any" is not valid as a type  [valid-type]
    ...adapter_config_change(self, key: str, old_value: any, new_value: any) ...
                                                        ^
ciris_engine/logic/runtime/adapter_manager.py:804:68: note: Perhaps you meant "typing.Any" instead of "any"?
ciris_engine/logic/services/runtime/control_service.py:54:67: error: Argument 2
to "RuntimeAdapterManager" has incompatible type "TimeServiceProtocol | None";
expected "TimeServiceProtocol"  [arg-type]
    ...f.adapter_manager = RuntimeAdapterManager(runtime, self._time_service)
                                                          ^~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/runtime/control_service.py:885:23: error: No
overload variant of "__sub__" of "datetime" matches argument type "None" 
[operator]
                uptime = (current_time - self._start_time).total_seconds()
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/runtime/control_service.py:885:23: note: Possible overload variants:
ciris_engine/logic/services/runtime/control_service.py:885:23: note:     def __sub__(self, datetime, /) -> timedelta
ciris_engine/logic/services/runtime/control_service.py:885:23: note:     def __sub__(self, timedelta, /) -> datetime
ciris_engine/logic/services/runtime/control_service.py:885:23: note: Right operand is of type "datetime | None"
ciris_engine/logic/services/runtime/control_service.py:921:23: error: No
overload variant of "__sub__" of "datetime" matches argument type "None" 
[operator]
                uptime = (current_time - self._start_time).total_seconds()
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/runtime/control_service.py:921:23: note: Possible overload variants:
ciris_engine/logic/services/runtime/control_service.py:921:23: note:     def __sub__(self, datetime, /) -> timedelta
ciris_engine/logic/services/runtime/control_service.py:921:23: note:     def __sub__(self, timedelta, /) -> datetime
ciris_engine/logic/services/runtime/control_service.py:921:23: note: Right operand is of type "datetime | None"
ciris_engine/logic/services/runtime/control_service.py:1385:9: error: Returning
Any from function declared to return "ServiceType"  [no-any-return]
            return ServiceType.CORE_SERVICE
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/services/runtime/control_service.py:1385:16: error:
"type[ServiceType]" has no attribute "CORE_SERVICE"  [attr-defined]
            return ServiceType.CORE_SERVICE
                   ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/runtime/service_initializer.py:334:13: error: Statement is
unreachable  [unreachable]
                logger.error("WA auth service is None")
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/runtime/service_initializer.py:486:36: error: Cannot
instantiate abstract class "DatabaseMaintenanceService" with abstract attributes
"_check_dependencies", "_get_actions" and "get_service_type"  [abstract]
            self.maintenance_service = DatabaseMaintenanceService(
                                       ^
ciris_engine/logic/runtime/service_initializer.py:508:41: error: Cannot
instantiate abstract class "SelfObservationService" with abstract attributes
"_check_dependencies", "_get_actions" and "get_service_type"  [abstract]
            self.self_observation_service = SelfObservationService(
                                            ^
ciris_engine/logic/runtime/service_initializer.py:692:9: error: Item "None" of
"Any | None" has no attribute "audit_service"  [union-attr]
            self.bus_manager.audit_service = self.audit_service
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/runtime/ciris_runtime.py:247:6: error: Name
"secrets_service" already defined on line 132  [no-redef]
        @property
         ^
ciris_engine/logic/runtime/ciris_runtime.py:252:6: error: Name
"adaptive_filter_service" already defined on line 156  [no-redef]
        @property
         ^
ciris_engine/logic/runtime/ciris_runtime.py:1026:42: error: Incompatible types
in assignment (expression has type "dict[Any, Any] | None", variable has type
"ShutdownResult")  [assignment]
                                    result = self.agent_processor.shutdown...
                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/api/api_runtime_control.py:88:17: error: Returning
Any from function declared to return "bool"  [no-any-return]
                    return await self.runtime.request_state_transition(
                    ^
ciris_engine/logic/adapters/api/api_runtime_control.py:235:32: error:
"dict[Any, Any]" has no attribute "messages_processed"  [attr-defined]
                messages_processed=status.metrics.messages_processed if st...
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_runtime_control.py:236:25: error:
"dict[Any, Any]" has no attribute "errors_count"  [attr-defined]
                error_count=status.metrics.errors_count if status.metrics ...
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/api_runtime_control.py:237:24: error:
"dict[Any, Any]" has no attribute "last_error"  [attr-defined]
                last_error=status.metrics.last_error if status.metrics els...
                           ^~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:30:5: error: Incompatible types in
assignment (expression has type "APIAdapterConfig", base class "Service" defined
the type as "dict[Any, Any]")  [assignment]
        config: APIAdapterConfig
        ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:65:9: error:
"APICommunicationService" has no attribute "_app_state"  [attr-defined]
            self.communication._app_state = self.app.state
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:193:21: error: Statement is
unreachable  [unreachable]
                        self.app.state.message_channel_map[msg.channel_id]...
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~...
ciris_engine/logic/adapters/api/adapter.py:294:33: error: Incompatible types in
assignment (expression has type "APIObserver", variable has type "None") 
[assignment]
            self.message_observer = APIObserver(
                                    ^
ciris_engine/logic/adapters/api/adapter.py:304:15: error: "None" has no
attribute "start"  [attr-defined]
            await self.message_observer.start()
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:325:24: error: Incompatible types in
assignment (expression has type "Server", variable has type "None") 
[assignment]
            self._server = uvicorn.Server(config)
                           ^~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:327:9: error: Statement is
unreachable  [unreachable]
            self._server_task = asyncio.create_task(self._server.serve())
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:352:13: error: Statement is
unreachable  [unreachable]
                self._server.should_exit = True
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:449:42: error: Right operand of
"and" is never evaluated  [unreachable]
                    if self._server_task and self._server_task.done():
                                             ^~~~~~~~~~~~~~~~~~~~~~~~
ciris_engine/logic/adapters/api/adapter.py:451:21: error: Statement is
unreachable  [unreachable]
                        assert self._server_task is not None
                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Found 405 errors in 87 files (checked 441 source files)
