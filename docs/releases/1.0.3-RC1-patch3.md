# Release v1.0.3-RC1-patch3

**Release Date:** January 26, 2025  
**Type:** Hotfix  
**Branch:** 1.0-RC1-patch3

## üî• Critical Production Fix

### Fixed
- **Import Error in User Node Corruption Auto-Repair** - Fixed critical import error that was preventing automatic repair of corrupted user nodes in production
  - Error: `No module named 'ciris_engine.schemas.memory'`
  - Impact: User nodes with LLM-corrupted timestamps (e.g., `2024-09-16T[insert current time]Z`) were not being automatically repaired
  - Fix: Corrected imports in `system_snapshot.py` (lines 655, 683, 705) from non-existent `ciris_engine.schemas.memory.core` to correct `ciris_engine.schemas.services.graph_core`
  - Updated to use `GraphNode` instead of non-existent `MemoryNode` class
  - Changed method call from non-existent `store()` to correct `memorize()`

## üìä Testing
- Added comprehensive unit tests for corruption fix (`test_system_snapshot_corruption_fix.py`)
- Added simple verification tests (`test_system_snapshot_corruption_simple.py`)
- All tests pass successfully

## üöÄ Deployment Notes

This is a critical hotfix that should be deployed immediately to production to restore the auto-repair functionality for corrupted user nodes.

### Deployment Steps:
1. Deploy patch3 to production
2. Monitor `incidents_latest.log` for any "INVALID DATA" entries
3. Verify user node corruption auto-repair is working

### Verification:
Check logs for successful auto-repair:
```bash
grep "INVALID DATA" logs/incidents_latest.log
grep "Failed to fix corrupted node" logs/incidents_latest.log
```

If auto-repair is working, you should see "INVALID DATA" entries but no "Failed to fix" errors.

## üìù Commits
- `2caa4388` - fix: Fix import error preventing user node corruption auto-repair
- `96ed764c` - test: Add simple tests to verify corruption fix imports work

## üîó Related Issues
- Production error discovered during log endpoint access
- Affects all users with corrupted `last_seen` timestamps containing template placeholders

---

*This patch restores critical data integrity functionality that was broken in production.*